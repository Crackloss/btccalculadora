<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- SEO Primary Meta Tags -->
  <title>Calculadora de Predicciones BTC/USDT - Simula Compra y Venta | 2026</title>
  <meta name="title" content="Calculadora de Predicciones BTC/USDT - Simula Compra y Venta | 2026">
  <meta name="description" content="Simula una operaci√≥n de compra y venta de Bitcoin con tus saldos de BTC y USDT. Incluye comisiones, slippage, beneficio y saldo final.">
  <meta name="keywords" content="calculadora trading bitcoin, simulador btc usdt, prediccion bitcoin, beneficio trading btc, calculadora compra venta btc">
  <meta name="author" content="Bitcoin Calculadora">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://bitcoincalculadora.com/calculadora-predicciones/">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://bitcoincalculadora.com/calculadora-predicciones/">
  <meta property="og:title" content="Calculadora de Predicciones BTC/USDT}}">
  <meta property="og:description" content="Simula escenarios de compra y venta de Bitcoin con comisiones y slippage.}}">
  <meta property="og:image" content="https://bitcoincalculadora.com/assets/og-image.png">
  <meta property="og:locale" content="es_ES">
  <meta property="og:site_name" content="Bitcoin Calculadora">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="https://bitcoincalculadora.com/calculadora-predicciones/">
  <meta name="twitter:title" content="Calculadora de Predicciones BTC/USDT}}">
  <meta name="twitter:description" content="Simula escenarios de compra y venta de Bitcoin con comisiones y slippage.}}">
  <meta name="twitter:image" content="https://bitcoincalculadora.com/assets/og-image.png">

  
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Calculadora de Predicciones BTC/USDT",
    "description": "Simulador de compra y venta de Bitcoin con beneficio y saldo final en BTC y USDT",
    "url": "https://bitcoincalculadora.com/calculadora-predicciones/",
    "applicationCategory": "FinanceApplication",
    "operatingSystem": "Web",
    "offers": { "@type": "Offer", "price": "0", "priceCurrency": "EUR" }
  }
  </script>
  

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='50' fill='%23f7931a'/><text y='.9em' x='50%' text-anchor='middle' font-size='70' fill='white'>‚Çø</text></svg>">
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Geist+Mono:wght@400;500&family=Instrument+Sans:wght@400;500;600&display=swap" rel="stylesheet">
  
  <!-- Styles -->
  <link rel="stylesheet" href="/css/styles.css">

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZSPP1PNLP1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-ZSPP1PNLP1');
  </script>


  <style>
.pred-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 18px; margin-bottom: 30px; }
    .pred-grid .input-group { margin-bottom: 0; }
    .unit-tag { padding-left: 14px; font-size: 0.875rem; font-weight: 500; color: var(--text-secondary); white-space: nowrap; }
    .privacy-inline { margin: 0 0 14px; padding: 10px 12px; border-radius: 10px; border: 1px solid rgba(34,197,94,0.35); background: var(--green-dim); color: var(--text); font-size: 0.875rem; }
    .privacy-inline strong { color: var(--green); }
    .step-title { font-size: 1.05rem; font-weight: 600; margin: 0 0 14px; color: var(--text); }
    .step-title.step-gap { margin-top: 8px; }
    .preview-box { background: var(--surface); border: 1px solid var(--border); border-radius: 12px; padding: 18px; margin-bottom: 34px; }
    .preview-label { font-size: 0.75rem; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.04em; margin-bottom: 10px; }
    .preview-value { font-family: 'Geist Mono', monospace; font-size: 1.8rem; color: var(--accent); margin-bottom: 8px; line-height: 1.2; }
    .preview-sub { font-size: 0.95rem; color: var(--text-secondary); margin-bottom: 4px; }
    .calc-btn { width: 100%; padding: 14px; background: var(--accent); color: #000; font-weight: 600; border: none; border-radius: 12px; cursor: pointer; transition: opacity 0.2s; margin: 6px 0 24px; }
    .calc-btn:hover { opacity: 0.9; }
    .error-msg { color: var(--red); font-size: 0.875rem; padding: 12px; background: rgba(239,68,68,0.1); border-radius: 8px; margin-bottom: 16px; display: none; }
    .hint { font-size: 0.8125rem; color: var(--text-secondary); margin-top: 8px; line-height: 1.45; }
    #pred-results { margin-top: 34px; }
    .results-title { font-size: 1rem; font-weight: 600; margin: 0 0 8px; color: var(--text); }
    .results-note { font-size: 0.8125rem; color: var(--text-secondary); margin: 0 0 10px; }
    #pred-results .results { margin-bottom: 24px !important; }
    #pred-results .result-row { padding: 18px 20px; }
    .positive { color: var(--green) !important; }
    .negative { color: var(--red) !important; }
    .share-btn { margin-top: 8px; }
    @media (max-width: 768px) {
      .pred-grid { grid-template-columns: 1fr; gap: 16px; }
      .preview-value { font-size: 1.5rem; }
      .calc-btn { margin: 4px 0 22px; }
      #pred-results { margin-top: 28px; }
    }
  </style>

</head>
<body>

  <div class="site-nav">
    <div class="nav-inner">
      <div class="nav-top">
        <a href="/" class="nav-brand">
          <svg class="btc-logo" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><circle cx="50" cy="50" r="50" fill="#f7931a"/><path d="M67.8 44.3c1-6.6-4-10.2-10.9-12.5l2.2-8.9-5.4-1.3-2.2 8.7c-1.4-.4-2.9-.7-4.3-1l2.2-8.7-5.4-1.3-2.2 8.9c-1.2-.3-2.3-.5-3.4-.8l-7.5-1.9-1.4 5.8s4 .9 3.9 1c2.2.5 2.6 2 2.5 3.1l-2.5 10.2c.2 0 .3.1.5.1l-.5-.1-3.6 14.3c-.3.7-.9 1.7-2.5 1.3.1.1-3.9-1-3.9-1L22 66l7 1.7c1.3.3 2.6.7 3.9 1l-2.3 9 5.4 1.3 2.2-8.9c1.5.4 2.9.8 4.3 1.1l-2.2 8.8 5.4 1.3 2.3-9c9.3 1.8 16.3.7 19.3-7.4 2.4-6.5-.1-10.3-4.8-12.7 3.4-.8 6-3.1 6.7-7.9zM58 55c-1.7 6.8-13.2 3.1-16.9 2.2l3-12.1c3.7.9 15.7 2.8 13.9 9.9zm1.7-17.5c-1.6 6.2-11.1 3-14.2 2.3l2.7-11c3.1.8 13.2 2.2 11.5 8.7z" fill="#fff"/></svg>
          <span>Bitcoin Calculadora</span>
          <span class="nav-subtitle">Calculadora de predicciones</span>
        </a>
        <button class="nav-hamburger" onclick="document.querySelector('.nav-calculadoras').classList.toggle('open');this.textContent=this.textContent==='‚ò∞'?'‚úï':'‚ò∞'" aria-label="Men√∫">‚ò∞</button>
      </div>
    <!-- Navegaci√≥n entre calculadoras -->
    <nav class="nav-calculadoras" aria-label="Calculadoras disponibles">
      <a href="/" class="nav-link ">üí∞ Sueldo</a>
      <a href="/calculadora-dca/" class="nav-link ">üìà DCA</a>
      <a href="/conversor/" class="nav-link ">üîÑ Conversor</a>
      <a href="/calculadora-predicciones/" class="nav-link active">üîÆ Predicciones</a>
      <a href="/si-hubiera-comprado/" class="nav-link ">üï∞Ô∏è Si hubiera</a>
      <a href="/calculadora-impuestos/" class="nav-link ">üßæ Impuestos</a>
      <a href="/calculadora-fees/" class="nav-link ">‚õèÔ∏è Fees</a>
      <a href="/comparador-exchanges/" class="nav-link ">üè¶ Exchanges</a>
      <a href="/calculadora-herencia/" class="nav-link ">üìú Herencia</a>
      <a href="/blog/" class="nav-link ">üìù Blog</a>
    </nav>

    </div>
  </div>

  <main class="container">

<div class="hero-text">
      <h2>Calculadora de <span class="accent">predicciones BTC/USDT</span></h2>
      <p>Simula una compra y una venta con comisiones y slippage para ver beneficio y saldo final.</p>
    </div>

    <section aria-label="Par√°metros de simulaci√≥n">
      <p class="privacy-inline"><strong>Privacidad:</strong> No se recopilan datos, todo es an√≥nimo.</p>
      <h3 class="step-title">Paso 1 a 4: define tu escenario de compra</h3>

      <div class="pred-grid">
        <div class="input-group">
          <label class="input-label" for="btc-inicial">1) BTC que tienes ahora</label>
          <div class="input-wrapper">
            <span class="unit-tag">BTC</span>
            <input class="pred-input" type="number" id="btc-inicial" value="0.20000000" min="0" step="0.00000001">
          </div>
          <p class="hint">Se usa para el c√°lculo final de tus BTC.</p>
        </div>

        <div class="input-group">
          <label class="input-label" for="usdt-inicial">2) USDT que tienes ahora</label>
          <div class="input-wrapper">
            <span class="unit-tag">USDT</span>
            <input class="pred-input" type="number" id="usdt-inicial" value="5000" min="0" step="0.01">
          </div>
          <p class="hint">Se usa para el c√°lculo final de tus USDT.</p>
        </div>

        <div class="input-group">
          <label class="input-label" for="precio-compra">3) Precio de compra</label>
          <div class="input-wrapper">
            <span class="unit-tag">USDT</span>
            <input class="pred-input" type="number" id="precio-compra" value="80000" min="0.01" step="0.01">
          </div>
          <p class="hint">¬øA qu√© precio har√≠as la compra? (USDT por 1 BTC)</p>
        </div>

        <div class="input-group">
          <label class="input-label" for="usdt-compra">4) USDT que usar√≠as para comprar</label>
          <div class="input-wrapper">
            <span class="unit-tag">USDT</span>
            <input class="pred-input" type="number" id="usdt-compra" value="2000" min="0.01" step="0.01">
          </div>
          <p class="hint">¬øCu√°ntos USDT utilizar√≠as para comprar?</p>
        </div>
      </div>

      <div class="preview-box" aria-live="polite">
        <p class="preview-label">Antes de los pasos 5 y 6</p>
        <p class="preview-value" id="preview-btc-comprado">‚Äî</p>
        <p class="preview-sub">BTC que obtendr√≠as en la operaci√≥n de compra</p>
        <p class="preview-sub">BTC totales tras comprar: <span id="preview-btc-total">‚Äî</span></p>
        <p class="hint" id="preview-note">Introduce los datos de los pasos 1 a 4 para ver la estimaci√≥n.</p>
      </div>

      <h3 class="step-title step-gap">Paso 5 y 6: define la venta</h3>
      <div class="pred-grid">
        <div class="input-group">
          <label class="input-label" for="precio-venta">5) Precio de venta</label>
          <div class="input-wrapper">
            <span class="unit-tag">USDT</span>
            <input class="pred-input" type="number" id="precio-venta" value="95000" min="0.01" step="0.01">
          </div>
          <p class="hint">Precio al que vender√≠as (USDT por 1 BTC).</p>
        </div>

        <div class="input-group">
          <label class="input-label" for="btc-vender">6) BTC que vender√≠as</label>
          <div class="input-wrapper">
            <span class="unit-tag">BTC</span>
            <input class="pred-input" type="number" id="btc-vender" value="0.02500000" min="0.00000001" step="0.00000001">
          </div>
          <p class="hint">Puedes vender todo o solo una parte.</p>
        </div>
      </div>

      <h3 class="step-title step-gap">Costes de ejecuci√≥n (opcional)</h3>
      <div class="pred-grid">
        <div class="input-group">
          <label class="input-label" for="fee-compra">Comisi√≥n compra (%)</label>
          <div class="input-wrapper">
            <span class="unit-tag">%</span>
            <input class="pred-input" type="number" id="fee-compra" value="0.10" min="0" step="0.01">
          </div>
        </div>

        <div class="input-group">
          <label class="input-label" for="fee-venta">Comisi√≥n venta (%)</label>
          <div class="input-wrapper">
            <span class="unit-tag">%</span>
            <input class="pred-input" type="number" id="fee-venta" value="0.10" min="0" step="0.01">
          </div>
        </div>

        <div class="input-group">
          <label class="input-label" for="slippage-compra">Slippage compra (%)</label>
          <div class="input-wrapper">
            <span class="unit-tag">%</span>
            <input class="pred-input" type="number" id="slippage-compra" value="0.10" min="0" step="0.01">
          </div>
        </div>

        <div class="input-group">
          <label class="input-label" for="slippage-venta">Slippage venta (%)</label>
          <div class="input-wrapper">
            <span class="unit-tag">%</span>
            <input class="pred-input" type="number" id="slippage-venta" value="0.10" min="0" step="0.01">
          </div>
        </div>
      </div>

      <button class="calc-btn" id="calculate-btn">Calcular escenario</button>
      <div id="pred-error" class="error-msg"></div>
    </section>

    <section id="pred-results" style="display:none;" aria-label="Resultados de la simulaci√≥n">
      <h3 class="results-title">1) Resultado de la operaci√≥n</h3>
      <p class="results-note">Compara lo invertido en la compra frente a lo recuperado en la venta.</p>
      <div class="results">
        <div class="result-row">
          <span class="result-label">BTC comprados (neto)</span>
          <span class="result-value" id="res-btc-comprado">‚Äî</span>
        </div>
        <div class="result-row">
          <span class="result-label">USDT obtenidos al vender (neto)</span>
          <span class="result-value highlight" id="res-usdt-venta">‚Äî</span>
        </div>
        <div class="result-row">
          <span class="result-label">Beneficio respecto a la inversi√≥n</span>
          <span class="result-value" id="res-beneficio">‚Äî</span>
        </div>
        <div class="result-row">
          <span class="result-label">Rentabilidad (ROI)</span>
          <span class="result-value" id="res-roi">‚Äî</span>
        </div>
      </div>

      <h3 class="results-title">2) Saldos finales</h3>
      <p class="results-note">As√≠ quedar√≠a tu cartera si no inviertes o no vendes todo.</p>
      <div class="results">
        <div class="result-row">
          <span class="result-label">USDT restantes tras la compra</span>
          <span class="result-value" id="res-usdt-restante">‚Äî</span>
        </div>
        <div class="result-row">
          <span class="result-label">USDT totales finales</span>
          <span class="result-value highlight" id="res-usdt-final">‚Äî</span>
        </div>
        <div class="result-row">
          <span class="result-label">BTC totales tras la compra</span>
          <span class="result-value" id="res-btc-tras-compra">‚Äî</span>
        </div>
        <div class="result-row">
          <span class="result-label">BTC finales tras la venta</span>
          <span class="result-value highlight" id="res-btc-final">‚Äî</span>
        </div>
      </div>

      <h3 class="results-title">3) Costes aplicados</h3>
      <p class="results-note">No se muestran precios efectivos. Esta herramienta es una simulaci√≥n orientativa.</p>
      <div class="results">
        <div class="result-row">
          <span class="result-label">Comisi√≥n pagada en compra</span>
          <span class="result-value" id="res-fee-compra">‚Äî</span>
        </div>
        <div class="result-row">
          <span class="result-label">Comisi√≥n pagada en venta</span>
          <span class="result-value" id="res-fee-venta">‚Äî</span>
        </div>
        <div class="result-row">
          <span class="result-label">Comisiones totales pagadas</span>
          <span class="result-value" id="res-fees-total">‚Äî</span>
        </div>
      </div>

      <button class="share-btn" id="share-pred">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
        Compartir simulaci√≥n en X
      </button>
    </section>

    <p class="disclaimer" style="margin-top:26px;">* Simulaci√≥n orientativa. No incluye impuestos, financiaci√≥n ni cambios de spread en tiempo real. No es asesoramiento financiero.</p>

    <section class="cta-section" aria-label="Hardware wallets recomendados">
      <p class="cta-label">Protege tus bitcoin con una hardware wallet</p>
      <div class="cta-row">
        <a href="https://affil.trezor.io/SH10j" target="_blank" rel="noopener sponsored" class="cta-link">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
            <rect x="5" y="11" width="14" height="10" rx="2"/>
            <path d="M12 3a4 4 0 0 0-4 4v4h8V7a4 4 0 0 0-4-4z"/>
          </svg>
          Trezor
        </a>
        <a href="https://shop.ledger.com/?r=ab735c3bd51c" target="_blank" rel="noopener sponsored" class="cta-link">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
            <rect x="5" y="11" width="14" height="10" rx="2"/>
            <path d="M12 3a4 4 0 0 0-4 4v4h8V7a4 4 0 0 0-4-4z"/>
          </svg>
          Ledger
        </a>
        <a href="https://bitbox.swiss/bitbox02/nova/?ref=kwktktar" target="_blank" rel="noopener sponsored" class="cta-link">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
            <rect x="5" y="11" width="14" height="10" rx="2"/>
            <path d="M12 3a4 4 0 0 0-4 4v4h8V7a4 4 0 0 0-4-4z"/>
          </svg>
          BitBox
        </a>
      </div>
      <div class="cta-row">
        <a href="https://store.blockstream.com/collections/physical-storage" target="_blank" rel="noopener sponsored" class="cta-link">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
            <rect x="5" y="11" width="14" height="10" rx="2"/>
            <path d="M12 3a4 4 0 0 0-4 4v4h8V7a4 4 0 0 0-4-4z"/>
          </svg>
          Blockstream
        </a>
      </div>
    </section>

    <div class="price-info">
      <div class="price-live">
        <span class="price-dot loading" id="price-dot" aria-hidden="true"></span>
        <span>1 BTC = <span id="btc-price">cargando...</span></span>
      </div>
      <span class="api-source" id="api-source"></span>
    </div>

    <footer>
      <p>
        Calculadora gratuita ¬∑ No almacenamos ning√∫n dato<br>
        Precios en tiempo real ¬∑ <a href="#" id="refresh-price">Actualizar precio</a><br><br>
        ¬© 2026 <a href="/">Bitcoin Calculadora</a> ¬∑ Esto no es asesoramiento financiero
      </p>
    </footer>


  </main>

  <script src="/js/main.js"></script>

<script>
    const errorDiv = document.getElementById('pred-error');
    const resultsDiv = document.getElementById('pred-results');
    const allInputs = document.querySelectorAll('.pred-input');
    let latestResult = null;

    function toNumber(id) {
      return parseFloat(document.getElementById(id).value);
    }

    function formatUsdt(num) {
      return num.toLocaleString('es-ES', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + ' USDT';
    }

    function formatBtcAmount(num) {
      return num.toLocaleString('es-ES', { minimumFractionDigits: 8, maximumFractionDigits: 8 }) + ' BTC';
    }

    function showError(message) {
      errorDiv.textContent = message;
      errorDiv.style.display = 'block';
      resultsDiv.style.display = 'none';
    }

    function clearError() {
      errorDiv.style.display = 'none';
    }

    function setSignedClass(el, value) {
      el.classList.remove('positive', 'negative');
      el.classList.add(value >= 0 ? 'positive' : 'negative');
    }

    function updatePurchasePreview() {
      const btcInitial = toNumber('btc-inicial');
      const usdtInitial = toNumber('usdt-inicial');
      const buyPrice = toNumber('precio-compra');
      const usdtToBuy = toNumber('usdt-compra');
      const buyFeePct = toNumber('fee-compra') || 0;
      const buySlippagePct = toNumber('slippage-compra') || 0;

      const btcPreview = document.getElementById('preview-btc-comprado');
      const btcTotalPreview = document.getElementById('preview-btc-total');
      const previewNote = document.getElementById('preview-note');

      if ([btcInitial, usdtInitial, buyPrice, usdtToBuy].some(v => isNaN(v)) || buyPrice <= 0 || usdtToBuy <= 0) {
        btcPreview.textContent = '‚Äî';
        btcTotalPreview.textContent = '‚Äî';
        previewNote.textContent = 'Introduce los datos de los pasos 1 a 4 para ver la estimaci√≥n.';
        return;
      }

      if (usdtToBuy > usdtInitial) {
        btcPreview.textContent = '‚Äî';
        btcTotalPreview.textContent = '‚Äî';
        previewNote.textContent = 'No puedes usar m√°s USDT de los que tienes.';
        return;
      }

      const buyPriceEffective = buyPrice * (1 + (buySlippagePct / 100));
      const usdtBuyFee = usdtToBuy * (buyFeePct / 100);
      const usdtUsedForBtc = usdtToBuy - usdtBuyFee;

      if (usdtUsedForBtc <= 0 || buyPriceEffective <= 0) {
        btcPreview.textContent = '‚Äî';
        btcTotalPreview.textContent = '‚Äî';
        previewNote.textContent = 'Revisa comisi√≥n y slippage de compra.';
        return;
      }

      const btcBought = usdtUsedForBtc / buyPriceEffective;
      const btcAfterBuy = btcInitial + btcBought;

      btcPreview.textContent = formatBtcAmount(btcBought);
      btcTotalPreview.textContent = formatBtcAmount(btcAfterBuy);
      previewNote.textContent = 'Estimaci√≥n tras la compra, antes de definir venta (pasos 5 y 6).';
    }

    function calculatePrediction() {
      updatePurchasePreview();

      const btcInitial = toNumber('btc-inicial');
      const usdtInitial = toNumber('usdt-inicial');
      const buyPrice = toNumber('precio-compra');
      const usdtToBuy = toNumber('usdt-compra');
      const sellPrice = toNumber('precio-venta');
      const btcToSell = toNumber('btc-vender');

      const buyFeePct = toNumber('fee-compra') || 0;
      const sellFeePct = toNumber('fee-venta') || 0;
      const buySlippagePct = toNumber('slippage-compra') || 0;
      const sellSlippagePct = toNumber('slippage-venta') || 0;

      if ([btcInitial, usdtInitial, buyPrice, usdtToBuy, sellPrice, btcToSell].some(v => isNaN(v))) {
        showError('Completa todos los campos obligatorios.');
        return;
      }

      if (btcInitial < 0 || usdtInitial < 0 || buyPrice <= 0 || usdtToBuy <= 0 || sellPrice <= 0 || btcToSell <= 0) {
        showError('Revisa los valores: no puede haber negativos y los precios/importes deben ser mayores que 0.');
        return;
      }

      if (usdtToBuy > usdtInitial) {
        showError('No puedes invertir m√°s USDT de los que tienes.');
        return;
      }

      const feeValues = [buyFeePct, sellFeePct, buySlippagePct, sellSlippagePct];
      if (feeValues.some(v => v < 0 || v >= 100)) {
        showError('Comisiones y slippage deben estar entre 0% y 99.99%.');
        return;
      }

      const buyPriceEffective = buyPrice * (1 + (buySlippagePct / 100));
      const usdtBuyFee = usdtToBuy * (buyFeePct / 100);
      const usdtUsedForBtc = usdtToBuy - usdtBuyFee;
      if (usdtUsedForBtc <= 0) {
        showError('La comisi√≥n de compra deja la inversi√≥n neta en 0. Revisa los valores.');
        return;
      }

      const btcBought = usdtUsedForBtc / buyPriceEffective;
      const btcAfterBuy = btcInitial + btcBought;
      const usdtAfterBuy = usdtInitial - usdtToBuy;

      if (btcToSell > btcAfterBuy) {
        showError('No puedes vender m√°s BTC de los que tendr√≠as tras la compra.');
        return;
      }

      const sellPriceEffective = sellPrice * (1 - (sellSlippagePct / 100));
      if (sellPriceEffective <= 0) {
        showError('El slippage de venta deja el precio efectivo en 0. Revisa los valores.');
        return;
      }

      const usdtGrossFromSell = btcToSell * sellPriceEffective;
      const usdtSellFee = usdtGrossFromSell * (sellFeePct / 100);
      const usdtNetFromSell = usdtGrossFromSell - usdtSellFee;

      const profit = usdtNetFromSell - usdtToBuy;
      const roi = (profit / usdtToBuy) * 100;

      const usdtFinal = usdtAfterBuy + usdtNetFromSell;
      const btcFinal = btcAfterBuy - btcToSell;

      document.getElementById('res-btc-comprado').textContent = formatBtcAmount(btcBought);
      document.getElementById('res-usdt-venta').textContent = formatUsdt(usdtNetFromSell);
      document.getElementById('res-beneficio').textContent = (profit >= 0 ? '+' : '') + formatUsdt(profit);
      document.getElementById('res-roi').textContent = (roi >= 0 ? '+' : '') + roi.toFixed(2) + '%';

      document.getElementById('res-usdt-restante').textContent = formatUsdt(usdtAfterBuy);
      document.getElementById('res-usdt-final').textContent = formatUsdt(usdtFinal);
      document.getElementById('res-btc-tras-compra').textContent = formatBtcAmount(btcAfterBuy);
      document.getElementById('res-btc-final').textContent = formatBtcAmount(btcFinal);

      document.getElementById('res-fee-compra').textContent = formatUsdt(usdtBuyFee);
      document.getElementById('res-fee-venta').textContent = formatUsdt(usdtSellFee);
      document.getElementById('res-fees-total').textContent = formatUsdt(usdtBuyFee + usdtSellFee);

      setSignedClass(document.getElementById('res-beneficio'), profit);
      setSignedClass(document.getElementById('res-roi'), roi);

      latestResult = {
        buyPrice,
        sellPrice,
        usdtToBuy,
        btcToSell,
        usdtNetFromSell,
        roi
      };

      clearError();
      resultsDiv.style.display = 'block';
    }

    function sharePrediction() {
      if (!latestResult) return;
      const text = `Si comprara BTC con ${formatUsdt(latestResult.usdtToBuy)} y vendiera ${latestResult.btcToSell.toFixed(6)} BTC de ${formatUsdt(latestResult.buyPrice)} a ${formatUsdt(latestResult.sellPrice)}, obtendr√≠a ${formatUsdt(latestResult.usdtNetFromSell)} (${latestResult.roi >= 0 ? '+' : ''}${latestResult.roi.toFixed(1)}%).\n\nSim√∫lalo aqu√≠:`;
      shareOnTwitter(text, 'https://bitcoincalculadora.com/calculadora-predicciones/');
    }

    document.getElementById('calculate-btn').addEventListener('click', calculatePrediction);
    document.getElementById('share-pred').addEventListener('click', sharePrediction);
    allInputs.forEach(input => input.addEventListener('input', () => {
      updatePurchasePreview();
      calculatePrediction();
    }));

    updatePurchasePreview();
    initPriceUpdates();
  </script>

</body>
</html>